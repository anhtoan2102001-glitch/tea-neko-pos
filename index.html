<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Mini POS ‚Äì Tea Neko V5.1 (Multi-Page)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Mini POS ‚Äì Tea Neko (Realtime V4)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    * { box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, Arial, sans-serif;
      padding: 10px;
      background: #f2f2f2;
    }
    .box {
      max-width: 480px;
      margin: 0 auto;
      background: #fff;
      border-radius: 16px;
      padding: 14px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.12);
    }
    h1 {
      margin: 0 0 6px;
      text-align: center;
      font-size: 20px;
    }
    .device-row {
      display: flex;
      gap: 8px;
      margin-bottom: 8px;
      align-items: center;
      font-size: 13px;
    }
    .device-row input {
      flex: 1;
      padding: 4px 8px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 13px;
    }

    .menu-section-title {
      margin-top: 8px;
      font-size: 15px;
      font-weight: 600;
      border-left: 4px solid #0a84ff;
      padding-left: 6px;
    }

    .menu-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
      margin-top: 6px;
    }

    .menu-item {
      border-radius: 12px;
      padding: 8px;
      background: #f5f5f5;
      cursor: pointer;
      border: 1px solid transparent;
      font-size: 14px;
      transition: .1s;
    }
    .menu-item:active {
      transform: scale(0.97);
      background: #e8f2ff;
    }

    .size-row, .qty-row, .cash-row {
      display: flex;
      gap: 8px;
      margin-top: 8px;
      align-items: center;
      font-size: 14px;
    }
    .size-row button {
      flex: 1;
      padding: 6px 0;
      border-radius: 999px;
      border: 1px solid #ccc;
      background: #f5f5f5;
      cursor: pointer;
      font-size: 13px;
    }
    .size-row button.active {
      background: #0a84ff;
      color: #fff;
      border-color: #0a84ff;
    }

    .qty-row input, .cash-row input {
      flex: 1;
      padding: 6px 8px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    .qty-row button {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: none;
      background: #eee;
      cursor: pointer;
      font-size: 18px;
    }

    .btn-row {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
      margin-top: 8px;
    }
    .btn {
      border-radius: 999px;
      border: none;
      padding: 8px 0;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      color: #fff;
    }
    .btn-undo { background: #8e8e93; }
    .btn-clear { background: #ff3b30; }
    .btn-save { background: #5856d6; }
    .btn-print { background: #34c759; }
    .btn-delete { background: #ff3b30; float:right; }

    .list-box {
      margin-top: 10px;
      padding: 10px;
      border-radius: 12px;
      background: #fafafa;
      font-size: 14px;
    }

    .history-box {
      margin-top: 10px;
      padding: 10px;
      border-radius: 12px;
      background: #ffffff;
      border: 1px solid #e0e0e0;
      font-size: 13px;
    }
    .history-item {
      border-bottom: 1px dashed #ddd;
      padding: 4px 0;
      position: relative;
    }
    .delete-x {
      position: absolute;
      right: 0;
      top: 0;
      padding: 0 6px;
      background: #ff3b30;
      color: #fff;
      border-radius: 4px;
      cursor: pointer;
      font-size: 11px;
    }
  </style>

  <script src="https://unpkg.com/@supabase/supabase-js@2/dist/umd/supabase.js"></script>
</head>
<body>
<div class="box">
  <h1>Mini POS ‚Äì Tea Neko</h1>

  <div class="device-row">
    <span>M√°y:</span>
    <input id="deviceName" placeholder="VD: Mac Qu·∫ßy 1, iPhone Thu Ng√¢n">
  </div>

  <div class="menu-section-title">LATTE / COFFEE / TR√Ä S·ªÆA</div>
  <div class="menu-grid" id="menuMain"></div>

  <div class="menu-section-title">T√πy ch·ªçn</div>
  <div class="size-row">
    <button id="sizeM" class="active">Size M</button>
    <button id="sizeL">Size L (+5.000)</button>
  </div>

  <div class="qty-row">
    <span>SL:</span>
    <button id="qtyMinus">‚àí</button>
    <input id="qtyInput" type="number" min="1" value="1">
    <button id="qtyPlus">+</button>
  </div>

  <div class="cash-row">
    <span>Kh√°ch ƒë∆∞a (ngh√¨n):</span>
    <input id="cashInput" type="number" min="0" placeholder="VD: 50">
  </div>

  <div class="btn-row">
    <button class="btn btn-undo" id="btnUndo">‚Ü© Ho√†n t√°c</button>
    <button class="btn btn-clear" id="btnClear">X√≥a t·∫•t c·∫£</button>
  </div>
  <div class="btn-row" style="margin-top:6px;">
    <button class="btn btn-save" id="btnSave">üíæ L∆∞u ƒë∆°n</button>
    <button class="btn btn-print" id="btnPrint">üßæ L∆∞u + In</button>
  </div>

  <div class="list-box">
    <div><strong>ƒê∆°n hi·ªán t·∫°i:</strong></div>
    <ul id="currentList"></ul>
    <div id="currentSummary">T·ªïng: 0 VND</div>
    <div id="cashSummary"></div>
  </div>

  <div class="history-box">
    <div style="display:flex;justify-content:space-between;">
      <strong>L·ªãch s·ª≠ ƒë∆°n</strong>
      <button id="btnRefreshHistory" class="btn btn-undo" style="padding:4px 10px;font-size:11px;">‚Üª</button>
    </div>
    <div id="historyList"></div>
    <div id="historyTotal">T·ªïng doanh thu: 0 VND</div>
  </div>
</div>
<script>
/* ===============================
   SUPABASE CONFIG
================================ */
const SUPABASE_URL = "https://kcrchwedlrettpkucoct.supabase.co";
const SUPABASE_KEY =
"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtjcmNod2VkbHJldHRwa3Vjb2N0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM4ODQ0MjgsImV4cCI6MjA3OTQ2MDQyOH0.g4WA9tci2zm4MIa6EvOe6tH_EhaoicdrdiP6swgjRgw";

const supa = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

/* ===============================
   MENU
================================ */
const MENU = [
  { name: "Matcha Latte",       price: 25000 },
  { name: "Coffee",             price: 25000 },
  { name: "Tr√† s·ªØa tr√¢n ch√¢u",  price: 30000 },
  { name: "H·ªìng tr√† s·ªØa",       price: 28000 },
  { name: "Cacao ƒë√°",           price: 22000 },
  { name: "B·∫°c x·ªâu",            price: 20000 },
];

/* ===============================
   STATE
================================ */
let currentOrder = [];
let currentSize = "M";
let historyOrders = [];

/* ===============================
   DOM
================================ */
const menuMain = document.getElementById("menuMain");
const sizeMBtn = document.getElementById("sizeM");
const sizeLBtn = document.getElementById("sizeL");
const qtyInput = document.getElementById("qtyInput");
const qtyMinus = document.getElementById("qtyMinus");
const qtyPlus = document.getElementById("qtyPlus");
const cashInput = document.getElementById("cashInput");
const currentList = document.getElementById("currentList");
const currentSummary = document.getElementById("currentSummary");
const cashSummary = document.getElementById("cashSummary");
const btnUndo = document.getElementById("btnUndo");
const btnClear = document.getElementById("btnClear");
const btnSave = document.getElementById("btnSave");
const btnPrint = document.getElementById("btnPrint");
const btnRefreshHistory = document.getElementById("btnRefreshHistory");
const historyList = document.getElementById("historyList");
const historyTotal = document.getElementById("historyTotal");
const deviceNameInput = document.getElementById("deviceName");

/* ===============================
   UTIL
================================ */
function formatVND(x) {
  return x.toLocaleString("vi-VN") + " VND";
}

/* ===============================
   RENDER MENU
================================ */
function renderMenu() {
  menuMain.innerHTML = "";
  MENU.forEach(item => {
    const div = document.createElement("div");
    div.className = "menu-item";
    div.innerHTML = `
      <div><strong>${item.name}</strong></div>
      <div>${formatVND(item.price)} (Size M)</div>
    `;
    div.onclick = () => addItem(item);
    menuMain.appendChild(div);
  });
}

/* ===============================
   ADD ITEM
================================ */
function addItem(item) {
  const qty = Math.max(1, parseInt(qtyInput.value || "1"));
  const isL = currentSize === "L";
  const unitPrice = item.price + (isL ? 5000 : 0);
  const lineTotal = qty * unitPrice;

  currentOrder.push({
    name: item.name,
    size: currentSize,
    qty,
    unitPrice,
    lineTotal,
  });

  renderCurrentOrder();
}

/* ===============================
   CURRENT ORDER RENDER
================================ */
function renderCurrentOrder() {
  currentList.innerHTML = "";
  let total = 0;

  currentOrder.forEach(it => {
    total += it.lineTotal;
    const li = document.createElement("li");
    li.textContent = `${it.qty} x ${it.name} (Size ${it.size}) ‚Äì ${formatVND(it.lineTotal)}`;
    currentList.appendChild(li);
  });

  currentSummary.textContent = "T·ªïng: " + formatVND(total);

  const cashK = parseInt(cashInput.value || "0");
  const cash = cashK * 1000;
  if (cash > 0) {
    cashSummary.textContent =
      `Kh√°ch ƒë∆∞a: ${formatVND(cash)} ‚Äì Th·ªëi l·∫°i: ${formatVND(Math.max(cash - total, 0))}`;
  } else {
    cashSummary.textContent = "";
  }
}

/* ===============================
   CLEAR ORDER
================================ */
function clearCurrentOrder() {
  currentOrder = [];
  cashInput.value = "";
  renderCurrentOrder();
}
/* =========================================
   SAVE ORDER ‚Üí INSERT INTO orders
========================================= */
async function saveOrder(printAfter) {
  if (currentOrder.length === 0) {
    alert("ƒê∆°n hi·ªán t·∫°i ƒëang tr·ªëng!");
    return;
  }

  const total = currentOrder.reduce((s, it) => s + it.lineTotal, 0);
  const cashK = parseInt(cashInput.value || "0");
  const cash = cashK * 1000;
  const change = cash ? cash - total : null;

  const device = deviceNameInput.value.trim() || "Kh√¥ng ƒë·∫∑t t√™n";

  const payload = {
    device,
    items: currentOrder,
    total,
    cash_given: cash || null,
    change
  };

  // insert ‚Üí Supabase s·∫Ω t·ª± g√°n order_code nh·ªù trigger
  const { data, error } = await supa
    .from("orders")
    .insert([payload])
    .select()
    .single();

  if (error) {
    console.error(error);
    alert("L∆∞u ƒë∆°n th·∫•t b·∫°i!");
    return;
  }

  // C·∫≠p nh·∫≠t UI ngay cho m∆∞·ª£t
  historyOrders.unshift(data);
  renderHistory();

  if (printAfter) printBill(data);

  clearCurrentOrder();
}


/* =========================================
   DELETE ORDER ‚Üí MOVE TO deleted_orders
========================================= */
async function deleteOrder(order) {
  if (!confirm("B·∫°n ch·∫Øc ch·∫Øn mu·ªën xo√° ƒë∆°n n√†y?")) return;

  // ƒë·∫©y sang deleted_orders
  await supa.from("deleted_orders").insert([{
    original_order_id: order.id,
    order_code: order.order_code,
    device: order.device,
    items: order.items,
    total: order.total,
    cash_given: order.cash_given,
    change: order.change,
    note: "Deleted from POS"
  }]);

  // xo√° kh·ªèi b·∫£ng orders
  await supa.from("orders").delete().eq("id", order.id);

  loadHistory();
}


/* =========================================
   LOAD HISTORY
========================================= */
async function loadHistory() {
  const { data, error } = await supa
    .from("orders")
    .select("*")
    .order("created_at", { ascending: false });

  if (error) return;

  historyOrders = data || [];
  renderHistory();
}


/* =========================================
   RENDER HISTORY
========================================= */
function renderHistory() {
  historyList.innerHTML = "";
  let revenue = 0;

  historyOrders.forEach(order => {
    revenue += order.total || 0;

    const div = document.createElement("div");
    div.className = "history-item";

    const timeStr = order.created_at
      ? new Date(order.created_at).toLocaleString("vi-VN")
      : "";

    const itemsText = (order.items || [])
      .map(it => `${it.qty}x ${it.name} (${it.size})`)
      .join(", ");

    div.innerHTML = `
      <div>
        <strong>${order.order_code || ""}</strong>
        ‚Äì [${timeStr}] ‚Äì (${order.device})<br>
        ${itemsText} = <strong>${formatVND(order.total)}</strong>
      </div>
      <button class="delete-x" onclick='deleteOrder(${JSON.stringify(order)})'>X</button>
    `;

    historyList.appendChild(div);
  });

  historyTotal.textContent = "T·ªïng doanh thu: " + formatVND(revenue);
}


/* =========================================
   REALTIME SUBSCRIPTION
========================================= */
function initRealtime() {
  supa
    .channel("orders-realtime")
    .on(
      "postgres_changes",
      { event: "INSERT", schema: "public", table: "orders" },
      (payload) => {
        historyOrders.unshift(payload.new);
        renderHistory();
      }
    )
    .subscribe();
}


/* =========================================
   PRINT BILL
========================================= */
function printBill(order) {
  const now = order.created_at ? new Date(order.created_at) : new Date();
  const timeStr = now.toLocaleString("vi-VN");

  let rows = "";
  (order.items || []).forEach(it => {
    rows += `
      <tr>
        <td>${it.name}</td>
        <td style="text-align:center;">${it.size}</td>
        <td style="text-align:center;">${it.qty}</td>
        <td style="text-align:right;">${formatVND(it.lineTotal)}</td>
      </tr>`;
  });

  const html = `
  <html>
  <head>
  <meta charset="UTF-8">
  <style>
  body { font-family:-apple-system; padding:8px; }
  .bill { width:300px; font-size:12px; }
  h2 { text-align:center; margin:0; font-size:16px; }
  table { width:100%; font-size:11px; }
  </style>
  </head>
  <body>
    <div class="bill">
      <h2>Tea Neko</h2>
      <div style="text-align:right;font-size:10px;">
        ƒê/c: Hai B√† Tr∆∞ng, Ch∆∞ S√™, Gia Lai<br>
        SƒêT: 0123456789
      </div>
      <div>Th·ªùi gian: ${timeStr}</div>
      <div>M√£ ƒë∆°n: <strong>${order.order_code}</strong></div>
      <table>
        ${rows}
        <tr><td colspan="3"><strong>T·ªïng</strong></td>
            <td style="text-align:right;"><strong>${formatVND(order.total)}</strong></td></tr>
      </table>
      <div style="text-align:center;margin-top:5px;">C·∫£m ∆°n qu√Ω kh√°ch üíú</div>
    </div>
  </body>
  </html>
  `;

  const win = window.open("", "_blank", "width=350,height=600");
  win.document.write(html);
  win.document.close();
  win.focus();
  win.print();
}


/* =========================================
   EVENT BINDINGS
========================================= */
sizeMBtn.onclick = () => {
  currentSize = "M";
  sizeMBtn.classList.add("active");
  sizeLBtn.classList.remove("active");
};

sizeLBtn.onclick = () => {
  currentSize = "L";
  sizeLBtn.classList.add("active");
  sizeMBtn.classList.remove("active");
};

qtyMinus.onclick = () => {
  qtyInput.value = Math.max(1, parseInt(qtyInput.value) - 1);
};
qtyPlus.onclick = () => {
  qtyInput.value = Math.max(1, parseInt(qtyInput.value) + 1);
};
cashInput.oninput = renderCurrentOrder;

btnUndo.onclick = () => {
  currentOrder.pop();
  renderCurrentOrder();
};

btnClear.onclick = () => {
  if (confirm("X√≥a to√†n b·ªô m√≥n hi·ªán t·∫°i?")) clearCurrentOrder();
};

btnSave.onclick = () => saveOrder(false);
btnPrint.onclick = () => saveOrder(true);
btnRefreshHistory.onclick = loadHistory;


/* =========================================
   INIT
========================================= */
renderMenu();
renderCurrentOrder();
loadHistory();
initRealtime();
<script>
// =============================================
//  TAB MENU ‚Äì CHUY·ªÇN TRANG
// =============================================
const tabs = document.querySelectorAll('.tab-btn');
const pages = document.querySelectorAll('.page');
const underline = document.getElementById('tabUnderline');

tabs.forEach((t, i) => {
  t.addEventListener('click', () => {
    tabs.forEach(btn => btn.style.color = "#333");
    t.style.color = "#007AFF";

    underline.style.transform = `translateX(${i * 100}%)`;

    pages.forEach(p => p.style.display = "none");
    document.getElementById(t.dataset.page).style.display = "block";
  });
});

// =============================================
//  FORMAT
// =============================================
function fVND(x) {
  return x.toLocaleString("vi-VN") + " VND";
}

// =============================================
//  LOAD ORDERS T·ª™ SUPABASE
// =============================================
async function loadAllOrders() {
  const { data, error } = await supa
    .from("orders")
    .select("*")
    .order("created_at", { ascending: false });

  if (error) {
    console.error(error);
    return [];
  }

  return data || [];
}

// =============================================
//  PAGE DOANH THU ‚Äì NG√ÄY / TU·∫¶N / TH√ÅNG
// =============================================
async function loadRevenue(mode = "day") {
  const orders = await loadAllOrders();
  let total = 0;

  const now = new Date();

  orders.forEach(o => {
    const t = new Date(o.created_at);

    if (mode === "day") {
      if (t.toDateString() === now.toDateString()) total += o.total;
    }
    else if (mode === "week") {
      const weekStart = new Date(now);
      weekStart.setDate(now.getDate() - now.getDay());
      if (t >= weekStart) total += o.total;
    }
    else if (mode === "month") {
      if (t.getMonth() === now.getMonth() && t.getFullYear() === now.getFullYear())
        total += o.total;
    }
  });

  document.getElementById("revResult").innerHTML =
    `<strong>${fVND(total)}</strong>`;
}

document.getElementById("revDay").onclick = () => loadRevenue("day");
document.getElementById("revWeek").onclick = () => loadRevenue("week");
document.getElementById("revMonth").onclick = () => loadRevenue("month");


// =============================================
//   PAGE L·ªäCH S·ª¨ ƒê∆†N + XO√Å + KH√îI PH·ª§C
// =============================================
let deletedMemory = []; // l∆∞u local

async function loadHistoryPage() {
  const orders = await loadAllOrders();
  const box = document.getElementById("historyList");
  box.innerHTML = "";

  orders.forEach(o => {
    const t = new Date(o.created_at).toLocaleString("vi-VN");
    const id = String(o.id).slice(-4).padStart(4, "0");
    const li = document.createElement("div");

    li.className = "history-item";
    li.innerHTML = `
      <div>
        <strong>#${id}</strong> ‚Äî [${t}] ‚Äî ${o.items.map(i => `${i.qty}x ${i.name}`).join(", ")}
        ‚Äî <strong>${fVND(o.total)}</strong>
      </div>
      <button class="del-btn" data-id="${o.id}">X</button>
    `;

    box.appendChild(li);
  });

  // x·ª≠ l√Ω n√∫t xo√°
  document.querySelectorAll(".del-btn").forEach(btn => {
    btn.onclick = async () => {
      const id = btn.dataset.id;

      // l·∫•y d·ªØ li·ªáu ƒë∆°n ƒë·ªÉ l∆∞u v√†o l·ªãch s·ª≠ xo√°
      const found = await supa.from("orders").select("*").eq("id", id).single();
      if (found.data) deletedMemory.push(found.data);

      // xo√° kh·ªèi supabase
      await supa.from("orders").delete().eq("id", id);

      loadHistoryPage();
      renderDeletedList();
    };
  });
}

function renderDeletedList() {
  const box = document.getElementById("deleted-list");
  box.innerHTML = "";

  deletedMemory.forEach((o, idx) => {
    const t = new Date(o.created_at).toLocaleString("vi-VN");

    const div = document.createElement("div");
    div.className = "deleted-item";
    div.innerHTML = `
      <div>[${t}] (#${String(o.id).slice(-4)}) ‚Äî ${o.items.map(i => `${i.qty}x ${i.name}`).join(", ")} ‚Äî <strong>${fVND(o.total)}</strong></div>
      <button class="restore-btn" data-i="${idx}">Kh√¥i ph·ª•c</button>
    `;

    box.appendChild(div);
  });

  document.querySelectorAll(".restore-btn").forEach(btn => {
    btn.onclick = async () => {
      const i = btn.dataset.i * 1;
      const item = deletedMemory[i];

      await supa.from("orders").insert([item]);

      deletedMemory.splice(i, 1);
      renderDeletedList();
      loadHistoryPage();
    };
  });
}


// =============================================
//  KHI M·ªû TRANG L·ªäCH S·ª¨
// =============================================
document.querySelector('[data-page="page-history"]').onclick = () => {
  loadHistoryPage();
};


// =============================================
//  KHI M·ªû TRANG DOANH THU
// =============================================
document.querySelector('[data-page="page-revenue"]').onclick = () => {
  document.getElementById("revResult").innerHTML = "0 VND";
};
</script>
</script>
</body>
</html>

</head>

<body style="margin:0; font-family:-apple-system, BlinkMacSystemFont, Arial; background:#f2f2f2;">

<!-- ============================
     TAB MENU (Ki·ªÉu 2 ‚Äì G·∫°ch d∆∞·ªõi)
=============================== -->
<div id="tabBar" style="
    display:flex;
    justify-content:space-around;
    background:white;
    padding:12px 0;
    border-bottom:1px solid #ddd;
    position:sticky;
    top:0;
    z-index:999;
">
  <div class="tab-btn" data-page="page-pos"
       style="padding:6px 10px; cursor:pointer; font-size:15px; font-weight:500;">
       POS
  </div>
  <div class="tab-btn" data-page="page-revenue"
       style="padding:6px 10px; cursor:pointer; font-size:15px; font-weight:500;">
       Doanh thu
  </div>
  <div class="tab-btn" data-page="page-history"
       style="padding:6px 10px; cursor:pointer; font-size:15px; font-weight:500;">
       L·ªãch s·ª≠
  </div>
  <!-- ============== PAGE 1: POS (M·∫∑c ƒë·ªãnh) ============== -->
<div class="page" id="pagePOS">

  <div class="device-row">
    <span>M√°y:</span>
    <input id="deviceName" placeholder="VD: Mac Qu·∫ßy 1, iPhone Thu Ng√¢n">
  </div>

  <div class="menu-section-title">LATTE / COFFEE / TR√Ä S·ªÆA</div>
  <div class="menu-grid" id="menuMain"></div>

  <div class="menu-section-title">T√πy ch·ªçn</div>
  <div class="size-row">
    <button id="sizeM" class="active">Size M</button>
    <button id="sizeL">Size L (+5.000)</button>
  </div>

  <div class="qty-row">
    <span>SL:</span>
    <button id="qtyMinus">‚àí</button>
    <input id="qtyInput" type="number" min="1" value="1">
    <button id="qtyPlus">+</button>
  </div>

  <div class="cash-row">
    <span>Kh√°ch ƒë∆∞a (ngh√¨n):</span>
    <input id="cashInput" type="number" min="0" placeholder="VD: 50">
  </div>

  <div class="btn-row">
    <button class="btn btn-undo" id="btnUndo">‚Ü© Ho√†n t√°c</button>
    <button class="btn btn-clear" id="btnClear">X√≥a t·∫•t c·∫£</button>
  </div>
  <div class="btn-row" style="margin-top:6px;">
    <button class="btn btn-save" id="btnSave">üíæ L∆∞u ƒë∆°n</button>
    <button class="btn btn-print" id="btnPrint">üßæ L∆∞u + In bill</button>
  </div>

  <div class="list-box">
    <div><strong>ƒê∆°n hi·ªán t·∫°i:</strong></div>
    <ul id="currentList"></ul>
    <div class="summary" id="currentSummary">T·ªïng: 0 VND</div>
    <div class="summary" id="cashSummary"></div>
  </div>

</div>
</div>

<!-- underline -->
<div id="tabUnderline" style="
    width:33.33%;
    height:3px;
    background:#007AFF;
    transition:transform .2s ease;
"></div>


<!-- ======================================
     PAGE 1 ‚Äî POS PAGE
======================================= -->
<div id="page-pos" class="page" style="padding:12px; display:block;">

  <div class="box" style="
      max-width:480px;
      margin:0 auto;
      background:white;
      border-radius:16px;
      padding:14px;
      box-shadow:0 2px 8px rgba(0,0,0,0.12);
  ">

    <h2 style="margin:0 0 10px; text-align:center;">Tea Neko ‚Äì POS</h2>

    <div style="display:flex; gap:8px; margin-bottom:10px;">
      <span style="font-size:14px;">M√°y:</span>
      <input id="deviceName" placeholder="VD: Thu ng√¢n 1" style="
        flex:1; padding:6px 10px; border-radius:10px; border:1px solid #ccc;">
    </div>

    <div class="menu-section-title"
         style="font-size:15px; font-weight:600; margin-top:8px;">
      LATTE / TR√Ä S·ªÆA / COFFEE
    </div>

    <div id="menuMain" style="
        display:grid;
        grid-template-columns:repeat(2,1fr);
        gap:10px;
        margin-top:8px;">
    </div>

    <div class="size-row" style="display:flex; gap:10px; margin-top:12px;">
      <button id="sizeM" class="size-btn active"
              style="flex:1; padding:8px; border-radius:20px;">Size M</button>
      <button id="sizeL" class="size-btn"
              style="flex:1; padding:8px; border-radius:20px;">Size L (+5k)</button>
    </div>

    <div class="qty-row" style="display:flex; gap:10px; margin-top:12px; align-items:center;">
      <span>SL:</span>
      <button id="qtyMinus" style="width:34px; height:34px;">‚àí</button>
      <input id="qtyInput" type="number" value="1" min="1"
             style="flex:1; padding:6px 10px; border-radius:10px;">
      <button id="qtyPlus" style="width:34px; height:34px;">+</button>
    </div>

    <div class="cash-row" style="display:flex; gap:10px; margin-top:12px;">
      <span>Kh√°ch ƒë∆∞a (ngh√¨n):</span>
      <input id="cashInput" type="number" placeholder="VD: 50"
             style="flex:1; padding:6px 10px; border-radius:10px;">
    </div>

    <div style="display:grid; gap:10px; grid-template-columns:repeat(2,1fr); margin-top:12px;">
      <button id="btnUndo" style="padding:10px; border-radius:18px; background:#8e8e93; color:white;">
        ‚Ü© Ho√†n t√°c
      </button>
      <button id="btnClear" style="padding:10px; border-radius:18px; background:#ff3b30; color:white;">
        X√≥a t·∫•t c·∫£
      </button>
    </div>

    <div style="display:grid; gap:10px; grid-template-columns:repeat(2,1fr); margin-top:10px;">
      <button id="btnSave" style="padding:10px; border-radius:18px; background:#5856d6; color:white;">
        üíæ L∆∞u ƒë∆°n
      </button>
      <button id="btnPrint" style="padding:10px; border-radius:18px; background:#34c759; color:white;">
        üßæ L∆∞u + In
      </button>
    </div>

    <div style="margin-top:15px; padding:12px; background:#fafafa; border-radius:12px;">
      <strong>ƒê∆°n hi·ªán t·∫°i:</strong>
      <ul id="currentList" style="max-height:220px; overflow:auto; margin-top:6px;"></ul>
      <div id="currentSummary" style="margin-top:8px; font-size:15px;">T·ªïng: 0 VND</div>
      <div id="cashSummary" style="margin-top:4px; font-size:14px; color:#444;"></div>
    </div>

  </div>
</div>

<!-- ======================================
     PAGE 2 ‚Äî REVENUE PAGE
======================================= -->
<div id="page-revenue" class="page" style="padding:12px; display:none;">

  <div class="box" style="
      max-width:480px; margin:0 auto; background:white;
      border-radius:16px; padding:16px; box-shadow:0 2px 8px rgba(0,0,0,0.12);
  ">
    <h2 style="margin:0 0 10px; text-align:center;">T·ªïng doanh thu</h2>

    <div id="revAll" class="rev-line" style="margin-top:10px; font-size:16px;">
      T·ªïng doanh thu: 0 VND
    </div>
    <div id="revDay" class="rev-line" style="margin-top:6px;">H√¥m nay: 0 VND</div>
    <div id="revWeek" class="rev-line" style="margin-top:6px;">Tu·∫ßn n√†y: 0 VND</div>
    <div id="revMonth" class="rev-line" style="margin-top:6px;">Th√°ng n√†y: 0 VND</div>

    <h3 style="margin-top:18px;">L·ªçc theo ng√†y</h3>
    <div style="display:flex; gap:10px; margin-top:8px;">
      <input id="revFrom" type="date" style="flex:1; padding:8px;">
      <input id="revTo" type="date" style="flex:1; padding:8px;">
    </div>

    <button id="btnRevFilter" style="
        width:100%; margin-top:12px; padding:10px;
        background:#007AFF; color:white; border-radius:10px;">
      L·ªçc doanh thu
    </button>

    <div id="revCustom" style="margin-top:12px; font-size:15px;"></div>

  </div>

</div>

<!-- ======================================
     PAGE 3 ‚Äî HISTORY PAGE
======================================= -->
<div id="page-history" class="page" style="padding:12px; display:none;">

  <div class="box" style="
      max-width:480px; margin:0 auto; background:white;
      border-radius:16px; padding:16px; box-shadow:0 2px 8px rgba(0,0,0,0.12);
  ">

    <h2 style="text-align:center; margin-top:0;">L·ªãch s·ª≠ ƒë∆°n</h2>

    <div style="margin-top:10px;">
      <input id="searchOrder" placeholder="T√¨m m√£ ƒë∆°n (#0003)"
             style="width:100%; padding:8px; border-radius:10px; border:1px solid #ccc;">
    </div>

    <div id="historyList" style="margin-top:15px;"></div>

    <h2 style="margin-top:30px; text-align:center;">L·ªãch s·ª≠ xo√° ƒë∆°n</h2>

    <div id="deletedList" style="margin-top:12px;"></div>

  </div>
<!-- ========================= -->
<!--  HISTORY LIST + DELETED   -->
<!-- ========================= -->

<h2 style="margin-top:30px; text-align:center;">L·ªãch s·ª≠ xo√°</h2>

<div id="deleted-list" style="margin-top:12px;">

  <!-- M·ªói m·ª•c xo√° s·∫Ω hi·ªÉn th·ªã nh∆∞ sau:
  <div class="deleted-item">
      <div>[14:32 23/11/2025] (#0003) 1x Matcha Latte, 2x B·∫°c x·ªâu ‚Äî 85.000 VND</div>
      <button class="restore-btn">Kh√¥i ph·ª•c</button>
  </div>
  -->

</div>

<style>
  .deleted-item {
    padding:10px;
    border-radius:10px;
    border:1px solid #ddd;
    margin-bottom:10px;
    background:#fff7f7;
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:10px;
  }
  .restore-btn {
    background:#34c759;
    border:none;
    padding:6px 12px;
    color:white;
    border-radius:6px;
    cursor:pointer;
    font-size:13px;
  }
</style>
</div>

<!-- END PAGE STRUCTURE -->
  
